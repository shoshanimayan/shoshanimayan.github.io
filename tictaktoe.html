<!-- AR.js by @jerome_etienne - github: https://github.com/jeromeetienne/ar.js - info: https://medium.com/arjs/augmented-reality-in-10-lines-of-html-4e193ea9fdbf -->
 <head>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    </head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
      <script src="https://unpkg.com/aframe-text-geometry-component@0.5.1/dist/aframe-text-geometry-component.min.js"></script>

    <script>


    
    AFRAME.registerComponent('markerhandler', {
    init: function() {
        const animatedMarker = document.querySelector("#animated-marker");
 const x2=document.querySelector("#x2");
   const x1=document.querySelector("#x1");
    const x3=document.querySelector("#x3");
 const x4=document.querySelector("#x4");
 const x5=document.querySelector("#x5");
 const x6=document.querySelector("#x6");
 const x7=document.querySelector("#x7");
 const x8=document.querySelector("#x8");
 const x9=document.querySelector("#x9");
  const game=document.querySelector("#board");


   var color ="red"
   var board =[["00","01","02"],["10","11","12"],["20","21","22"]]
   var playing=true;
function changeColor(){
    if(color==="red"){color="blue";}
    else{color="red";}
}

function winEvent(){
playing=false;
document.querySelector("#winMessage").setAttribute( "text-geometry","value: "+color+" wins!; size: 0.1");
document.querySelector("#winMessage").setAttribute('material', 'color', color);

}

function winCheck(){
    if(board[0][0]===board[0][1]&&board[0][0]===board[0][2]){winEvent();}//horzantal
    if(board[1][0]===board[1][1]&&board[1][0]===board[1][2]){winEvent();}
    if(board[2][0]===board[2][1]&&board[2][0]===board[2][2]){winEvent();} 
    if(board[0][0]===board[1][1]&&board[0][0]===board[2][2]){winEvent();}//daignal
    if(board[0][2]===board[1][1]&&board[0][2]===board[2][0]){winEvent();}
    if(board[0][0]===board[1][0]&&board[0][0]===board[2][0]){winEvent();}//vertical
    if(board[0][1]===board[1][1]&&board[0][1]===board[2][1]){winEvent();}
    if(board[0][2]===board[1][2]&&board[0][2]===board[2][2]){winEvent();}
}
            
animatedMarker.addEventListener('click', function(ev, target){
    if(playing){
                    console.log(board);
            const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
            if (x1 && intersectedElement === x1) {
                console.log("x1");
                x1.setAttribute('material', 'color', color);
                board[1][1] =color;
                winCheck();
                changeColor();
            }  
            if (x2 && intersectedElement === x2) {
                console.log("x2");
                x2.setAttribute('material', 'color', color);  
                board[2][1] =color;
                winCheck();
                changeColor();

            }   
            if (x3 && intersectedElement === x3) {
                console.log("x3");
                x3.setAttribute('material', 'color', color);
               board[0][1] =color;
               winCheck();
                changeColor();

            } 
            if (x4 && intersectedElement === x4) {
                console.log("x4");
                x4.setAttribute('material', 'color', color);
                board[0][2] =color;
                winCheck();
                changeColor();

            } 
            if (x5 && intersectedElement === x5) {
                console.log("x5");
                x5.setAttribute('material', 'color', color);
                board[0][0] =color;
                winCheck();
                changeColor();

            } 
            if (x6 && intersectedElement === x6) {
                console.log("x6");
                x6.setAttribute('material', 'color', color);
                board[1][2] =color;
                winCheck();
                 changeColor();

            } 
            if (x7 && intersectedElement === x7) {
                console.log("x7");
                x7.setAttribute('material', 'color', color);
                board[1][0] =color;
                winCheck();
                changeColor();

            } 
            if (x8 && intersectedElement === x8) {
                console.log("x8");
                x8.setAttribute('material', 'color', color);
                board[2][2] =color;
                winCheck();
                changeColor();

            } 
            if (x9 && intersectedElement === x9) {
                console.log("x9");
                x9.setAttribute('material', 'color', color);
                board[2][0] =color;
                winCheck();
                 changeColor();

            } 
        }
        });
      
}});
    </script>
<body style='margin : 0px; overflow: hidden;'>
    <a-scene embedded arjs='sourceType: webcam;'>
        <a-marker markerhandler emitevents="true" cursor="rayOrigin: mouse" id="animated-marker" preset="hiro">
                        <a-entity rotation="-90 0 0" position="0 0 -3.5"  id ="winMessage"></a-entity>

<a-entity position= "0 0 -2" id ="board">
             <a-entity id="x1" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='0 0 0' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
            <a-entity id="x2" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='0 0 1' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
            <a-entity id="x3" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='0 0 -1' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
             <a-entity id="x4" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='1 0 -1' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
             <a-entity id="x5" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='-1 0 -1' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
             <a-entity id="x6" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='1 0 0' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
             <a-entity id="x7" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='-1 0 0' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
            <a-entity id="x8" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='1 0 1' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
             <a-entity id="x9" geometry="primitive: plane; height: .5; width: .5" material="color: white" position='-1 0 1' color='white' rotation ="-90 0 0" >
                <a-text wrapCount = "5" align = "center"></a-text>
            </a-entity>
</a-entity> 
        </a-marker>
    </a-scene>
</body>
